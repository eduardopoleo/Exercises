1)What is a class?
It is a code template that basically serves as a mold for creating objects. You can define state attibutes (some can be immidiately initialized) and you can also implement behavior through methods.

2)What is object?
An object is an instance of a class. It possesses a defined state represeted by the data (value of the attributes) stored within it. 

3)What is ruby module? What's the difference between class and module? 
Modules are a collection of methods that can be used across different classes. Works sort of like a library that you can plug wherever you need. The do not define the nature of an object as clasess do. 

One use-case of modules is when we want to extract commom behavior between two classes that won't naturally enhirit from each other.

4)Three levels of method access control for classes and modules?
Public: Methods can be called by anyone. Other classess or instances can call each other public methods. E.x class methods by default 
Protected: These methods can only be called by the intances of the defining class and its subclasess
Private: This methods can not be called with an explicit reciever (the reciever is set to .self). Can only be called by the object containing them.

6) Explain this ruby idiom: a ||= b
In ruby this is the equivalent of 

a || a = b

Which literatlly means if a then do nothing but a is nil, make a equal to b.

In rails this expression allows caching which is useful to increase performance.
def current_user
  @current_user ||= User.find(session[:user_id])
end

The first time we call this method it will issue a query to the data base but will set and store the result in the cash?, next time we call it there will no need to query the object again.  

8) What is a Proc? Better whats the difference between a block, proc and lamda. Is this relevant when constructing DSLs?
http://awaxman11.github.io/blog/2013/08/05/what-is-the-difference-between-a-block/
Blocks is leterally a block of code that I can use to repeat certain operations over a define set of data, they can be defined as:

[1,2,3].each { |x| puts x*2 }   # block is in between the curly braces

[1,2,3].each do |x|
  puts x*2                    # block is everything between the do and end
end

procs  are instances of the class Proc.  This allows us to call methods on it and assign it to variables (basically store them). Proc basically acts as an anonymous method. 

p = Proc.new { |x| puts x*2 }
[1,2,3].each(&p)
The & converts the proc into a block to be use by the each.
procs can also be call to themselves and the method class can be called on them.

p.call  # prints 'Hello World'
p.class # returns 'Proc'
a = p   # a now equals p, a Proc instance
p       # returns a proc object '#<Proc:0x007f96b1a60eb0@(irb):46>'

Trying to do this with an block with result in errors.
{ puts "Hello World"}       # syntax error  
a = { puts "Hello World"}   # syntax error 

Now a lamda is also an instance of Proc can have the same uses as a proc but with little differences: 
Difference 1) How to initiate them.

p = Proc.new { |x| puts x*2 }
[1,2,3].each(&lam)

lam = lambda { |x| puts x*2 }
[1,2,3].each(&lam)

1)Number of arguments. Lamda checks the number of arguments while procs do not care

lam = lambda { |x| puts x }    # creates a lambda that takes 1 argument
lam.call(2)                    # prints out 2
lam.call                       # ArgumentError: wrong number of arguments (0 for 1)
lam.call(1,2,3)                # ArgumentError: wrong number of arguments (3 for 1)

proc = Proc.new { |x| puts x } # creates a proc that takes 1 argument
proc.call(2)                   # prints out 2
proc.call                      # returns nil
proc.call(1,2,3)               # prints out 1 and forgets about the extra arguments

There is also another difference regarding the return key.

9) What is unit testing (in classical terms)? What is the primary technique when writing a test?
It is test used over small and isolated portion of code. This chunck of codes usually have very specific and defined functionality (e.g a  simple class or a method)
assert that the result value is equal to the expected

Difference between ==, ===, eql?, equal?.
http://batsov.com/articles/2011/11/28/ruby-tip-number-1-demystifying-the-difference-between-equals-equals-and-eql/
Equal checks for object equality basically verifies that the objects have the same object id.

eql? is a more stricted version of ==
For example 

1 == 1       # true
1.eql? 1     # true
1 == 1.0     # true
1.eql? 1.0   # false
1.0.eql? 1.0 # true

#######
What does === means?
######

13)Difference between += and .concat
+= creates a new object and .concat mutates the original caller.

Extra) the difference between map, each and collect.
http://stackoverflow.com/questions/9429034/what-is-the-difference-between-map-each-and-collect

.each
Just do operations over the elements of the enumerable but does not store the result anywhere nor it returns a new enumerable with change values. 
.map is the same as .collect
The create a new array with the new values after they were changed

a = [1,2,3]
=> [1, 2, 3] 
a.each{|n| n+1}
=> [1, 2, 3] 
a.map{|n| n+1}
=> [2, 3, 4] 

14) Why array.map(&:method_name) is equivalent to array.map {|element| element.method_name} 
reference: http://www.brianstorti.com/understanding-ruby-idiom-map-with-symbol/

###
I can wrap my head arond this
I know &basically calls .to_proc on a object.
Now how are map implemented and how can I understand the implementations of symbol to proc
###

15)Which of the expressions listed below will result in "false"?
true    ? "true" : "false" 
false   ? "true" : "false" this
nil     ? "true" : "false" this
1       ? "true" : "false"
0       ? "true" : "false"
"false" ? "true" : "false"
""      ? "true" : "false"
[]      ? "true" : "false"

16) Write a method that sorts the keys in a hash by the length of the key as a string. For instance, the hash:
h = { abc: 'hello', 'another_key' => 123, 4567 => 'third' }
http://www.sitepoint.com/sorting-algorithms-ruby/

h.keys.map(&:to_s).sort_by(&:size)

19) Consider the following two methods:

def times_two(arg1);
  puts arg1 * 2;
end

def sum(arg1, arg2);
  puts arg1 + arg2;
end

What will be the result of each of the following lines of code:

times_two 5
times_two(5)
times_two (5)
sum 1, 2 => 7
sum(1, 2)=> 7
sum (1, 2) syntax error

When there is only one argument any notation will do.
When there is two arguments the last one will fail.

20) What will val1 and val2 equal after the code below is executed? Explain your answer.

val1 = true and false  # hint: output of this statement in IRB is NOT value of val1!
val2 = true && false

In this case and is and addition operation that ruby allows us to do, so basically set the val1 = true and then yield the value of val1 && false which is false

The second case is just performing an operation true && false

####No idea why this works
21)(a) {p a}["Hello world"]
###

24) What is a ruby gem?
Is a reusable library that meets a certain format adequate for the use of ruby and rails applications. 
examples of gems that I like: bootstrap_form, carrier_wave, carrierwave-aws, will_paginate etc,


25) What is your favorite api resource for ruby?
None

extra) What does self mean?
Self refers to the current object. The gotcha is that classes are also objects.
So 

Class Whatever
  def test
    puts "This is an instance method #{self}"
  end

  def self.test_class
    puts "This is a class method #{self}"
  end
end

Whatever.new.test
puts "This is an instance method #{self}"

Whatever.test_class
puts "This is a class method #{self}"

extra) What is a Proc?
 and on a simple level we can use it to store chuncks of code inside a variable for instance

26) What's the difference between blocks, procs and lambdas? (Repeat)

27) About sorting in ruby and in ActiveRecord 
sort_by(&:attribute) which is the same as sort_by{|object| object.attribute}
http://www.adamjonas.com/blog/interview-prep/

In ruby is good to use the sort_by method. This method takes in a proc which we can define ourselves. 

No in rails is much better to let sql order the recores retrieved by us

User.all.sort_by{|u| u.first_name} #=> O(log n) Ruby working over the objects extracted on the query
versus
User.order(“first_name DESC”) #=> O(1) Sql working on the records directly 

28) What are some of your favorite gems? What are their alternatives?
I do not know

### I do not know if this is correct
31 	Ruby what are the various Ruby runtimes, and how are they different?
JRuby, CRuby, Rubinius?
###

32)  Matz (Yikihiro Matsumoto)

33) What is the general history of rails?
Started out in 2003 as part of a 37signal project call basecamp. They wanted a better framework for their development. 
DHH saw fit to make it open source as he had largely benefit from the open source community to that point.

35 Explain the different pieces of Rails.?

36) Walk through the flow of a request through Rails.
Routes
before_filter
queries maybe
partial rendering
after_filter

######
37 	Rails	What are the different server options for running a Rails/Rack app?
#######

38) Explain CSRF and how Rails combats it.
Basically there are requests hidden behind html tags such as img for intance. <img src="http://bank.example.com/withdraw?account=Alice&amount=1000000&for=Mallory">
The image contains a request to generate an action on another site. If the user is authenticated on this other site and there is no protections against it the actions gets executed without the users permision

To protect against all other forged requests, we introduce a required security token that our site knows but other sites don't know. We include the security token in requests and verify it on the server

40) Define DHH?

Define "tenderlove".
Aaron Patterson, a really important contributor

42)Why do some people say "Rails can't scale"?
This controversy came up mainly after twitter decided to move away from rails.
But in reality rails scalabilty will depend on the type of applications that we are building. Twitter was used by millons of people who generated tons of data that needed to be updated very quickly. This is not the case for most web apps.
#####
43) What is Rack?
####

46) What are some Ruby web server options?	
Unicorn handle requests concurrently
Puma handle requests concurrently
Thin
Phusion

48) Explain how AJAX work?
Ajax stand for asynchronous javascript and XML, and it is used to update specific content on the page without having to do a full reload of the page

- An event happends on the browser side (click over a certain element with an id)
- Ajax generates an server request to the specific url that we want to work with
- Get the response back as html 
- Replace whatever with what the page content on the browser with whatever that was produced

###
52) what is the issue with the code posted
http://www.toptal.com/ruby-on-rails/interview-questions
We are making many queries:
Post.all
post.map(&:comments)(this is n queries)
comments.map(&:author) (this is m queries)

We need to perform eager loading to solve the N + 1 query problem
If we only require comments we could do
Post.includes(:comments)

Now to retrive multiple associations we need to 
Post.includes(:comments, :category)

and if they are nested
Post.includes(:comments, [:author]).all will retrieve all the posts
####

53)

get posts/:id/comments   named route: comments_post
post posts/bulk_load     named route: bulk_load_posts

55) Easier challenge. Seems to me a M:M self referential association

class Person  ActiveRecord::Base
  belongs_to :parent, class: Person
  has_many :children, class: Person, foreign_key: :parent_id
end
it is not necessary M:M self referential because in this case the child will only have 1 parent. The table will neeed parent_id to be able to set it up.
This can be extended to two model relationship and wont need anything in the data base because the grandchildren are still childs of the children

And for the second one:
class Person  ActiveRecord::Base
  belongs_to :parent, class: Person
  has_many :children, class: Person, foreign_key: :parent_id
  has_many :grandchildren, class: Person, through: :children, source: :children
end

56) routes and beers
kinds = %{ipa pilsen etc}
get 'beers/:kind' => 'beers#kind', constrains: {kind: Regexp.new(kinds.join('|'))}

57) What is the HTTP 
It stands for Hyper Text Transfer Protocol. And it is the protocol that guide the information tranfer between 2 end points in the web. Notably, it's statelessness nature is what makes do things the way we do it on the web, passing information in params, having different controller actions with specific routes 

58)What is HTTP session state?
The session is used when we need to to save information in a semi-permanent way to allow certain interactions to happen. Common uses are user authentication and shpping carts, keepint track of the cart_id or the user_id are esential for an efective user experience. 

59) What is a Idempotent operation?
Is that one that have no additional effects if it is called more than once! ex abs(abs(3)) = abs(3)

60) What are Persistent connections? 
It is also known as keep alive. The idea is using a single TCP conection to send multiple HTTP request/responses, as oposed to open a new request after each request/response cycle.

What does UNION do? What is the difference between UNION and UNION ALL?
The union operator is used to select the union-set of two different select statements
SELECT column_name(s) FROM table1
UNION
SELECT column_name(s) FROM table2;

The union operator select only distinc values if we want to allow duplication we should use union all 
SELECT column_name(s) FROM table1
UNION ALL
SELECT column_name(s) FROM table2;

63) List and explain the different types of JOIN clauses supported in ANSI-standard SQL.

124) What’s your favorite testing tool?	
Rspec + capybara, also like minitest but have not used it that much

126) How would you declare and use a constructor in Ruby?
Contructors are the methods we use to initialize new objects in ruby. We know that we do this

pencil = Pencil.new('yellow')

but what does exactly the new class method do? 3things:

class Point
  def self.my_new(x,y)
    instance = allocate #allocate a new, empty object
    instance.my_initialize(*args, &block) #Run any specialized initialization we write
    instance #return the instance we just created
  end

  def my_initilize(x,y)
    @x = x
    @y = y
  end
end

127) How does a symbol differ from a string?
http://www.reactive.io/tips/2009/01/11/the-difference-between-ruby-symbols-and-strings/
Symbols are unique meaning that equal objects are going to have the same object_id. This is not the same for strings, every string must have its place in memory because they are mutable and the ruby interpreter never knows what exact data is the string holding. 
Symbols are not mutable 

puts "hello"  " world" # => hello world
puts :hello :" world"# => *.rb:4: undefined method ` for :hello:Symbol (NoMethodError)

When a string is created several things happen
1) computer allocate memory for the new string object
2) instanciate the string
3) once its done marks it for destruction
4) GC comes and picks it up

If we are creating a string with the same content several times e.g:

puts 'yeah '
puts 'yeah '
puts 'yeah '
puts 'yeah '

The four steps mentioned above repeat themselves n times. 

Symbols are inmutable and will ocupy the same space in memory so they will no be created again and again furthermore they are keep in memory at special optimized symbol dictionary making their retrieval eaiser.
conclusion: use symbols when performance and robustness is an issue
            use strings when a flexible data type is required

129) How would you create getter and setter methods in Ruby?
I would use attr_accessor :attribute

130)Describe the difference between class and instance variables?
Class is a code template that is used to instanciate objects. Instance variables define the state of an instance of a class they are two completely different things

131)Explain some of the looping structures available in Ruby? Explain situations in which you would use one over another?
each When I want to loop through a colection and performe a certain action.
map when I want to loop through a collection and modify each of the elements of the collection and return the result.
while when I want to run through the loop until a certain condition is met. the loop wont start if the condition is not met befrehand.
begin until same as while but I want to ensure that the loop will a least go once
loop do a loop that will usually contain a condition inside that will make it to break
for something in colletion_of_something same as each.
downto(0) do |i|

132) Explain the difference between a has_one and belongs_to association.
The main difference in this case is where in what table is the foreign key located, it should always be on the table that correspond to the model that has the belongs_to association.

133) Explain a polymorphic association.
A model can belong to several other models on a single association.
class Picture
  belongs_to :imaginable, polymorphic: true
end

class Employee
  has_many :pictures, as: :imaginable
end

class Employee
  has_many :pictures, as: :imaginable
end

